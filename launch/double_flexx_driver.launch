<launch>
      <!-- Name of the node_1. All topics will be advertised under this name. -->
      <arg name="base_name_1" default="pico_flexx_1" />
      <!-- Name of the node_2. All topics will be advertised under this name. -->
      <arg name="base_name_2" default="pico_flexx_2" />
      <!-- ID of the sensor_1 that should be used. IDs of all connected devices are listed on startup. -->
      <arg name="sensor_1" default="" />
      <!-- ID of the sensor_2 that should be used. IDs of all connected devices are listed on startup. -->
      <arg name="sensor_2" default="" />
      <!-- ID of the use case. A list of supported use cases is listed on startup. -->
      <arg name="use_case" default="0" />
      <!-- Enable or disable automatic expusure. -->
      <arg name="automatic_exposure" default="true" />
      <!-- Exposure time. Only for manual exposure. -->
      <arg name="exposure_time" default="1000" />
      <!-- Maximum allowed noise. Data with higher noise will be filtered out. -->
      <arg name="max_noise" default="0.07" /> <!--0.07 0.035 0.0025-->
      <!-- Range of the 16-Bit mono image which should be mapped to the 0-255 range of the 8-Bit mono image. The resulting range is `range_factor` times the standard deviation arround mean. -->
      <arg name="range_factor" default="2.0" />
      <!-- Queue size for publisher. -->
      <arg name="queue_size" default="5" />
      <!-- Publish a static TF transform for the optical frame of the camera. -->
      <arg name="publish_tf" default="true" />
      <!-- Base name of the tf_1 frames. -->
      <arg name="base_name_tf_1" default="$(arg base_name_1)" />
      <!-- Base name of the tf_2 frames. -->
      <arg name="base_name_tf_2" default="$(arg base_name_2)" />
      <!-- Machine on with the nodes should run. -->
      <arg name="machine" default="localhost" />
      <!-- Whether the machine for localhost should be defined our not. Disable this if the launch file is included somewhere where machines are already defined. -->
      <arg name="define_machine" default="true" />
      <!-- Name of the nodelet manager. -->
      <arg name="nodelet_manager" default="pico_flexx_manager" />
      <!-- Whether to start a nodelet manager our not. Disable this if a different nodelet manager should be used. -->
      <arg name="start_manager" default="true" />

      <!-- Default machine definition. -->
      <machine name="localhost" address="localhost" if="$(arg define_machine)" />

      <node pkg="tf" type="static_transform_publisher" name="picoflexx1_unrotated_broadcaster" args="0.15 0.027 -0.055 1.57079632679 0 1.57079632679 robot_base $(arg base_name_1)_optical_frame_unrotated 100" />
      <node pkg="tf" type="static_transform_publisher" name="picoflexx2_unrotated_broadcaster" args="0.15 -0.027 -0.055 1.57079632679 0 1.57079632679 robot_base $(arg base_name_2)_optical_frame_unrotated 100" />
      <node pkg="tf" type="static_transform_publisher" name="picoflexx1_broadcaster" args="0 0 0 0 0.43633231299 0.08726646259 $(arg base_name_1)_optical_frame_unrotated $(arg base_name_1)_optical_frame 100" />
      <node pkg="tf" type="static_transform_publisher" name="picoflexx2_broadcaster" args="0 0 0 3.14159 0.43633231299 -0.08726646259 $(arg base_name_2)_optical_frame_unrotated $(arg base_name_2)_optical_frame 100" />
      <!-- Nodelet manager. -->
      <node pkg="nodelet" type="nodelet" name="$(arg nodelet_manager)" args="manager" if="$(arg start_manager)" machine="$(arg machine)" output="screen" />

      <!-- pico_flexx_driver nodelet_1. -->
      <node pkg="nodelet" type="nodelet" name="$(arg base_name_1)_driver" machine="$(arg machine)" args="load pico_flexx_driver/pico_flexx_nodelet $(arg nodelet_manager)" respawn="true" output="screen">
            <param name="base_name" type="str" value="$(arg base_name_1)" />
            <param name="sensor" type="str" value="$(arg sensor_1)" />
            <param name="use_case" type="int" value="$(arg use_case)" />
            <param name="automatic_exposure" type="bool" value="$(arg automatic_exposure)" />
            <param name="exposure_time" type="int" value="$(arg exposure_time)" />
            <param name="max_noise" type="double" value="$(arg max_noise)" />
            <param name="range_factor" type="double" value="$(arg range_factor)" />
            <param name="queue_size" type="int" value="$(arg queue_size)" />
            <param name="base_name_tf" type="str" value="$(arg base_name_tf_1)" />
      </node>
      <!-- pico_flexx_driver nodelet_2. -->
      <node pkg="nodelet" type="nodelet" name="$(arg base_name_2)_driver" machine="$(arg machine)" args="load pico_flexx_driver/pico_flexx_nodelet $(arg nodelet_manager)" respawn="true" output="screen">
            <param name="base_name" type="str" value="$(arg base_name_2)" />
            <param name="sensor" type="str" value="$(arg sensor_2)" />
            <param name="use_case" type="int" value="$(arg use_case)" />
            <param name="automatic_exposure" type="bool" value="$(arg automatic_exposure)" />
            <param name="exposure_time" type="int" value="$(arg exposure_time)" />
            <param name="max_noise" type="double" value="$(arg max_noise)" />
            <param name="range_factor" type="double" value="$(arg range_factor)" />
            <param name="queue_size" type="int" value="$(arg queue_size)" />
            <param name="base_name_tf" type="str" value="$(arg base_name_tf_2)" />
      </node>

</launch>
